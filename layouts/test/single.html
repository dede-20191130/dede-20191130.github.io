{{- define "main" }}
{{- $scratch := newScratch }}
{{- if isset .Params "image" }}
{{- $scratch.Set "image" .Params.image }}
{{- else }}
{{ $scratch.Set "image" .Site.Params.fallBackOgImage }}
{{- end }}
{{- $image := $scratch.Get "image" }}
{{- $bg := (path.Join "images" $image | absLangURL) }}
<div class="grid-inverse wrap content">
  <article class="post_content">
    {{- partial "i18nlist" . }}
    <h1 class="post_title">{{ .Title }}</h1>
    {{- partial "post-meta" . }}
    {{ partial "share" . }}
    {{ with .Params.featureImage }}
    <img src="{{ . }}" class="image_featured">
    {{ end }}
    {{ if .Params.toc }}
    <h2>Overview 20201123</h2>
    {{ .TableOfContents }}
    {{ end }}
    <!-- ##add test codes -->
    <!-- attribute escape -->
    <p>
      {{ $variable := "javascript:alert('Hello');" }}
      <a href="{{ $variable }}">alert link</a><br>
      <a {{ printf "href=%q" $variable | safeHTMLAttr }}>alert link</a><br>
      <a href={{ $variable | safeHTMLAttr }}>alert link</a>
    </p>
    <!-- renderstring -->
    <p>
      {{ "**Bold Markdown  <br>~~太字~~**" | .RenderString }}
    </p>
    {{ $optBlock := dict "display" "block" }}
    {{ "**Bold Block Markdown**" | .RenderString  $optBlock }}
    <!-- eq -->
    <!-- */ 従来の比較 /* -->
    {{ $test := "bonjour" }}
    {{ $bool01 :=  in (slice "bonjour" "goodbye" "ciao") $test }}
    {{ $bool02 :=  in (slice "ok" "goodbye" "ciao") $test }}

    <!-- */ 一行で比較 /* -->
    {{ $bool03 :=  eq $test "bonjour" "goodbye" "ciao" }}
    {{ $bool04 :=  eq $test "Yahh" "goodbye" "ciao" }}
    <p>
      $bool01 {{ $bool01 }} <br>
      $bool02 {{ $bool02 }} <br>
      $bool03 {{ $bool03 }} <br>
      $bool04 {{ $bool04 }} <br>
    </p>
    <!-- 'if' statement one-line -->
    <p>
      {{ if ne 1 "1" }}{{ .Site.Title }}{{ end }}
    </p>
    <p>
      {{$url01 :=  .Site.BaseURL | printf "%scategories/podcast/"}}
      {{ if ne 1  (int "1")  }}{{ .Site.Title }}{{ else }}<a href="{{ $url01  }}"> {{ $url01  }}</a>{{ end }}
    </p>
    <!-- 'site' access -->
    <p>
      {{ .Site.Params.introDescription }}
    </p>
    <!-- getpage -->
    <p>
      {{ with .Site.GetPage "/my-archives" }}■{{ .Title }}■{{ end }}
    </p>
    <!-- %s -->
    {{ with .Site.Params.fallBackOgImage }}
        <p>
          www:{{ printf "%s" . }}
        </p>
        <p>
          qqq:{{ absURL . }}
        </p>
        <p>
          eee:<img class="m-aside-widget__profile-avatar-img" src="{{ absURL .  }}" />
        </p>
        {{ if fileExists (printf "/static/%s" . ) }}
            {{ $profile_image := resources.Get . }}
            {{ with $profile_image }}
              <img class="m-aside-widget__profile-avatar-img" src="{{ .Permalink }}" />
            {{ end }}   
        {{ end }}
    {{ end }}
    <!-- ##here -->
    {{- .Content }}
    {{ if and ( ne .Site.Params.comment false ) ( ne .Params.comment false ) }}
    {{ partial "comments" . }}
    {{ end }}
  </article>
  {{- partial "sidebar" . }}
</div>
{{- end }}